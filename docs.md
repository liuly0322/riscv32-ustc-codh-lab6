# VGA 井字棋实验文档

## task list

- [ ] C 语言控制程序
- [ ] VGA 控制模块
- [ ] CPU MMIO 改造

## 原理说明

C 语言控制程序通过 MMIO 写入 VGA 需要用到的寄存器，VGA 通过控制模块对这些寄存器译码，决定在屏幕上的输出

## 接口约定

MMIO 从 0x8000 开始是 VGA 的内存

实际寄存器形式：

```verilog
reg [1: 0] vga_reg[0:18]
```

- 0x8000 至 0x8020，是每个格子的状态编码

  - 2'b00: 该格子没有棋子
  - 2'b01: 该格子对应圈
  - 2'b10: 该格子对应叉

- 0x8024 至 0x8044，是每个格子是否处在备选状态

  - 2'b00: 该格子当前不是备选状态
  - 2'b01: 该格子备选圈
  - 2'b10: 该格子备选叉

- 0x8048，是游戏结果
  - 2'b00: 无
  - 2'b01: 圈胜出
  - 2'b10: 叉胜出

内存默认小端序，C 语言读取/写入时，直接采用指针解引用即可

为了获得用户输出，这里直接采用开关的 mmio, 每次可以得到一个 32 位的数

- 0xff10: 为 1 说明开关输入有效
- 0xff14: 从这里读用户输入的数据

具体用户输入数据的格式在 C 语言控制程序中给出
